document.addEventListener("DOMContentLoaded",function(){var e=window.location.pathname||"",t="/research/"===e||"/research"===e||e.endsWith("/research/")||e.endsWith("/research"),n=-1!==e.indexOf("/projects/");if(t||n){document.body.classList.add("js-research");var r=document.querySelectorAll(".reveal-on-scroll");if(r.length>0)if("IntersectionObserver"in window){var i=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(e.target.classList.add("is-visible"),i.unobserve(e.target))})},{threshold:.2});r.forEach(function(e){i.observe(e)})}else r.forEach(function(e){e.classList.add("is-visible")});var o=Array.prototype.slice.call(document.querySelectorAll(".research-chip[data-target]"));if(0!==o.length){var a=o.map(function(e){var t=e.getAttribute("data-target");return document.getElementById(t)}).filter(Boolean),c=function(e){o.forEach(function(t){t.classList.toggle("is-active",t.getAttribute("data-target")===e)})};if(o.forEach(function(e){e.addEventListener("click",function(){c(e.getAttribute("data-target"))})}),0!==a.length){if("IntersectionObserver"in window){var s=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&c(e.target.id)})},{root:null,rootMargin:"-40% 0px -45% 0px",threshold:.01});a.forEach(function(e){s.observe(e)})}else{var d=function(){var e=a[0];a.forEach(function(t){t.getBoundingClientRect().top<=.4*window.innerHeight&&(e=t)}),c(e.id)};window.addEventListener("scroll",d,{passive:!0}),d()}c(a[0].id)}}}});